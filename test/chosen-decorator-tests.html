<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>seed-element</title>

    <!-- Import dependencies -->
    <script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../../polymer/polymer.html">
    <link rel="import" href="../chosen-decorator.html">
</head>

<body>

<p>
    <chosen-decorator width="300" id="typicalChosen">
        <select>
            <option>1 test</option>
            <option>2 test 2</option>
            <option>3 3 test</option>
        </select>
    </chosen-decorator>
</p>

<script>
    suite('<chosen-decorator>', function() {
        var el = document.getElementById('typicalChosen');
        test('exists', function() {
            assert.isNotNull(el);
        });

        test('chosen instantiated', function() {
            assert.equal(1, document.querySelectorAll('.chosen-container').length);
        });

        test('test dynamic insert', function(done) {
            var markup = '<chosen-decorator width="300" id="test">' +
                    '<select>' +
                    '<option>1 test</option>' +
                    '<option>2 test 2</option>' +
                    '<option>3 3 test</option>' +
                    '</select>' +
                    '</chosen-decorator>';

            var div = document.createElement('div');
            div.innerHTML = markup;

            var fc = div.firstChild;
            el.parentNode.insertBefore(fc, el);

            setTimeout(function() {
                assert.equal(1, fc.querySelectorAll('.chosen-container').length);
                done();
            }, 10);
        });

        //todo: test that options are working

    });
</script>

</body>
</html>